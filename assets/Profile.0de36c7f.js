import{c as P,a as N,u as b,j as a,b as t,o as x,d as g,e as T,G as S,A as k,f as C,g as y,F as I,r as f,P as M,h as $,i as A,k as F,l as L,s as w}from"./index.637adc4b.js";import{l as _}from"./no-logo.a291e1ee.js";import{w as z}from"./withAuthRedirect.05b130af.js";const U="post_BFY",W="post-title_ydB",j="postItems_8oN",B="button_s4r",D="text-area_HXg";var m={post:U,postTitle:W,postItems:j,button:B,textArea:D};const H=P().shape({postText:N().max(250)});function E({onBtnClick:e}){const{register:o,handleSubmit:s,reset:n}=b({resolver:x(H)});return a("form",{onSubmit:s(r=>{e(r.postText),n()}),className:m.postItems,children:[t("div",{className:m.textArea,children:t("textarea",{placeholder:"New Post...",...o("postText")})}),t("button",{className:m.button,type:"submit",children:"Post"})]})}const V=()=>({}),R={onBtnClick:T};var X=g(V,R)(E);function G(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}const J="post-wrapper_bCR",Y="info_xLX",O="wrapper_e2j",Z="icon_jY0",q="logo_H1c",K="name_e6U",Q="post_ZIN";var p={postWrapper:J,info:Y,wrapper:O,icon:Z,logo:q,name:K,post:Q};const tt=({children:e,likes:o,name:s="No name",deletePost:n,id:i,logo:r})=>{const u=()=>{n(i)};return a("div",{className:p.postWrapper,children:[a("div",{className:p.wrapper,children:[a("div",{className:p.info,children:[t("div",{className:p.logo,children:t("img",{src:r,alt:""})}),t("div",{className:p.name,children:s})]}),t("div",{className:p.icon,children:t(G,{size:18,onClick:u})})]}),a("div",{className:p.post,children:[t("p",{className:p.like,children:e}),a("span",{children:[o," ",t(k,{color:"#4b484b",size:12})]})]})]})};var et=g(null,{deletePost:C})(tt);function ot({posts:e,name:o,logo:s}){return t("div",{children:e==null?void 0:e.map(({id:n,message:i,likesCount:r})=>t(et,{likes:r,id:n,name:o,logo:s,children:i},n))})}const st=e=>{var o;return{posts:e.profilePage.posts,name:e.profilePage.profile.fullName,logo:(o=e.profilePage.profile.photos)!=null&&o.small?e.profilePage.profile.photos.small:_}},nt=g(st)(ot);function at(){return a("div",{className:m.post,children:[t("h2",{className:m.postTitle,children:"My Posts"}),t(X,{}),t(nt,{})]})}const rt="profile_shb";var it={profile:rt};function lt(e){function o(s){let n=y();return t(e,{...s,params:n})}return o}const ct="profile-logo_08B",pt="profile-info_I5z",ut="profile-name_WtF",dt="contacts_-HX",ht="status-text_-uG",ft="status-input_-XC",mt="file-input_9tu",gt="file-input-label_blB",vt="profile_Tbm";var c={profileLogo:ct,profileInfo:pt,profileName:ut,contacts:dt,statusText:ht,statusInput:ft,fileInput:mt,fileInputLabel:gt,profile:vt};const Pt=({profile:e})=>{let o=[];for(let s in e.contacts)e.contacts[s]&&o.push(s);return a(I,{children:[t("div",{children:a("strong",{children:["About:"," ",t("span",{style:{fontWeight:"400"},children:e.aboutMe?e.aboutMe:"No bio"})]})}),t("div",{children:a("strong",{children:["Looking for a job:"," ",t("span",{style:{fontWeight:"400"},children:e.lookingForAJob?"Yes":"No"})]})}),t("div",{children:a("strong",{children:["Description for looking a job:"," ",t("span",{style:{fontWeight:"400"},children:e.lookingForAJobDescription?e.lookingForAJobDescription:"No desc"})]})}),a("div",{children:[t("h6",{style:{fontSize:"16px"},children:"Contacts:"}),t("ul",{children:o.length?o.map((s,n)=>t("li",{className:c.contacts,children:t("a",{target:"_blank",href:"//"+e.contacts[s],children:s})},n)):"No contacts"})]})]})},Nt=P().shape({statusText:N().max(50)}),bt=({status:e,updateUserStatus:o})=>{const[s,n]=f.exports.useState(!1),[i,r]=f.exports.useState(e),{register:u,handleSubmit:d}=b({resolver:x(Nt)});f.exports.useEffect(()=>{r(e)},[e]);const h=()=>{n(!0)},l=v=>{n(!1),o(v.statusText)};return t("div",{children:s?t("div",{className:c.statusInput,children:t("form",{onSubmit:d(l),children:t("input",{...u("statusText"),autoFocus:!0,type:"text"})})}):t("div",{className:c.statusText,children:t("span",{onDoubleClick:h,children:e||"This place for your status"})})})},xt=({profile:e,status:o,updateUserStatus:s,isOwner:n,setPhoto:i})=>{var d,h;const r=f.exports.useId();if(!e)return t(M,{variant:"profile"});const u=l=>{l.target.files.length&&i(l.target.files[0])};return t(I,{children:a("div",{className:c.profileInfo,children:[t("div",{className:c.profileLogo,children:t("img",{src:(d=e.photos)!=null&&d.large?(h=e.photos)==null?void 0:h.large:_,alt:"logo"})}),t("div",{className:c.profileName,children:t("h6",{children:e.fullName})}),n&&a("label",{htmlFor:r,className:c.fileInputLabel,children:["Choose image",t("input",{type:"file",onChange:u,id:r,className:c.fileInput})]}),n?t(bt,{status:o,updateUserStatus:s}):t("div",{className:c.statusText,children:t("span",{children:o||"No status"})}),t(Pt,{profile:e})]})})};function It({params:e,isAuth:o,userId:s,getUserProfile:n,profile:i,getUserStatus:r,status:u,updateUserStatus:d,setPhoto:h}){const l=e["*"]?e["*"]:s,v=s===l;return f.exports.useEffect(()=>{s&&(n(l),r(l))},[l,o]),t(xt,{isOwner:v,profile:i,status:u,setPhoto:h,updateUserStatus:d})}const _t=e=>({profile:e.profilePage.profile,userId:e.auth.userId,status:e.profilePage.status}),Tt={getUserProfile:A,getUserStatus:F,updateUserStatus:L,setPhoto:w};var St=$(g(_t,Tt),lt,z)(It);const Mt=()=>a("main",{className:it.profile,children:[t(St,{}),t(at,{})]});export{Mt as default};

import{b as s,c as u,a as v,d as p,u as _,j as r,o as N,s as x,n as b,h as T}from"./index.ea1d1173.js";import{w as $}from"./withAuthRedirect.1367c250.js";const w="messages-wrapper_dT-",I="messages_lhi",f="messages-header_zUH",M="messages-logo_wlL",y="messages-name_4hi";var c={messagesWrapper:w,messages:I,messagesHeader:f,messagesLogo:M,messagesName:y};const A="message_uwA",C="message-text_u7A",D="my-message_D8a",H="another-message_yYO";var i={message:A,messageText:C,myMessage:D,anotherMessage:H};const W=({children:e,fromMe:a})=>s("div",{className:`${i.message} ${a?i.myMessage:i.anotherMessage}`,children:s("p",{className:i.messageText,children:e})}),L="wrapper_mN1",k="input_V-h",z="button_yIA";var g={wrapper:L,input:k,button:z};const P=u().shape({messageText:v().max(150)}),S=({onBtnClick:e})=>{const{register:a,handleSubmit:t,reset:n}=_({resolver:N(P)});return r("form",{onSubmit:t(m=>{e(m.messageText),n()}),className:g.wrapper,children:[s("input",{...a("messageText"),type:"text",placeholder:"Your message...",className:g.input}),s("button",{type:"submit\r ",className:g.button,children:"Send"})]})},j={onBtnClick:x},U=p(()=>({}),j)(S),Y=({messages:e,users:a})=>{var n;const t=a==null?void 0:a.findIndex(o=>o.active===!0);return r("div",{className:c.messagesWrapper,children:[r("div",{className:c.messagesHeader,children:[s("div",{className:c.messagesLogo,children:s("img",{src:`https://picsum.photos/200?random=${t}`,alt:""})}),s("div",{className:c.messagesName,children:(n=a[t])==null?void 0:n.name})]}),s("div",{className:c.messages,children:e==null?void 0:e.map(({message:o,id:m,fromMe:h})=>s(W,{fromMe:h,children:o},m))}),s(U,{})]})},B="dialog_TXA",F="active_NI7",G="last-text-wrapper_2Zo";var l={dialog:B,active:F,lastTextWrapper:G};const K=({name:e,id:a,isActive:t,lastMessage:n})=>{const o=`/dialogs/${a}`;return r("div",{className:`${l.dialog} ${t?l.active:""}`,children:[s("img",{src:"https://avatars.dzeninfra.ru/get-zen_doc/1704967/pub_600aab7d6f1fa165c1064a87_600aaba1b7c9394d30364e7d/scale_1200",alt:""}),r(b,{to:o,children:[s("h4",{children:e}),s("div",{className:l.lastTextWrapper,children:s("p",{children:n})})]})]})},O="dialogs_AzK",R="dialogs-item_bGa";var d={dialogs:O,dialogsItem:R};function V({users:e,messages:a}){return r("div",{className:d.dialogs,children:[s("div",{className:d.dialogsItem,children:e==null?void 0:e.map(({id:t,name:n,active:o})=>s(K,{name:n,id:t,isActive:o,lastMessage:a[a.length-1].message},t))}),s(Y,{messages:a,users:e})]})}const X=e=>s(V,{...e}),Z=e=>({users:e.messagesPage.users,messages:e.messagesPage.messages});var J=T(p(Z),$)(X);export{J as default};

import{c as N,a as P,u as b,j as a,b as t,o as x,d as g,e as T,G as S,A as M,f as k,g as y,F as I,r as h,P as C,h as $,i as A,k as F,l as L,s as w}from"./index.5b290e68.js";import{l as _}from"./no-logo.a291e1ee.js";import{w as z}from"./withAuthRedirect.3fbeb736.js";const U="post_BFY",W="post-title_ydB",B="postItems_8oN",H="button_s4r",j="text-area_HXg";var m={post:U,postTitle:W,postItems:B,button:H,textArea:j};const D=N().shape({postText:P().max(250)});function V({onBtnClick:e}){const{register:o,handleSubmit:s,reset:n}=b({resolver:x(D)});return a("form",{onSubmit:s(r=>{e(r.postText),n()}),className:m.postItems,children:[t("div",{className:m.textArea,children:t("textarea",{placeholder:"New Post...",...o("postText")})}),t("button",{className:m.button,type:"submit",children:"Post"})]})}const E=()=>({}),R={onBtnClick:T};var J=g(E,R)(V);function X(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}const G="post-wrapper_bCR",Y="info_xLX",Z="wrapper_e2j",q="icon_jY0",K="logo_H1c",O="name_e6U",Q="post_ZIN";var p={postWrapper:G,info:Y,wrapper:Z,icon:q,logo:K,name:O,post:Q};const tt=({children:e,likes:o,name:s="No name",deletePost:n,id:i,logo:r})=>{const u=()=>{n(i)};return a("div",{className:p.postWrapper,children:[a("div",{className:p.wrapper,children:[a("div",{className:p.info,children:[t("div",{className:p.logo,children:t("img",{src:r,alt:""})}),t("div",{className:p.name,children:s})]}),t("div",{className:p.icon,children:t(X,{size:18,onClick:u})})]}),a("div",{className:p.post,children:[t("p",{className:p.like,children:e}),a("span",{children:[o," ",t(M,{color:"#4b484b",size:12})]})]})]})};var et=g(null,{deletePost:k})(tt);function ot({posts:e,name:o,logo:s}){return t("div",{children:e==null?void 0:e.map(({id:n,message:i,likesCount:r})=>t(et,{likes:r,id:n,name:o,logo:s,children:i},n))})}const st=e=>{var o;return{posts:e.profilePage.posts,name:e.profilePage.profile.fullName,logo:(o=e.profilePage.profile.photos)!=null&&o.small?e.profilePage.profile.photos.small:_}},nt=g(st)(ot);function at(){return a("div",{className:m.post,children:[t("h2",{className:m.postTitle,children:"My Posts"}),t(J,{}),t(nt,{})]})}const rt="profile_shb";var it={profile:rt};function lt(e){function o(s){let n=y();return t(e,{...s,params:n})}return o}const ct="profile-logo_08B",pt="profile-info_I5z",ut="profile-name_WtF",dt="profile-main_gmR",ft="contacts_-HX",ht="status-text_-uG",mt="status-input_-XC",gt="file-input_9tu",vt="file-input-label_blB",Nt="profile_Tbm";var l={profileLogo:ct,profileInfo:pt,profileName:ut,profileMain:dt,contacts:ft,statusText:ht,statusInput:mt,fileInput:gt,fileInputLabel:vt,profile:Nt};const Pt=({profile:e})=>{let o=[];for(let s in e.contacts)e.contacts[s]&&o.push(s);return a(I,{children:[t("div",{children:a("strong",{children:["About me:"," ",t("span",{style:{fontWeight:"400"},children:e.aboutMe?e.aboutMe:"No bio"})]})}),t("div",{children:a("strong",{children:["Looking for a job:"," ",t("span",{style:{fontWeight:"400"},children:e.lookingForAJob?"Yes":"No"})]})}),t("div",{children:a("strong",{children:["Job description:"," ",t("span",{style:{fontWeight:"400"},children:e.lookingForAJobDescription?e.lookingForAJobDescription:"No desc"})]})}),a("div",{children:[t("h6",{style:{fontSize:"16px"},children:"Contacts:"}),t("ul",{children:o.length?o.map((s,n)=>t("li",{className:l.contacts,children:t("a",{target:"_blank",href:"//"+e.contacts[s],children:s})},n)):"No contacts"})]})]})},bt=N().shape({statusText:P().max(50)}),xt=({status:e,updateUserStatus:o})=>{const[s,n]=h.exports.useState(!1),[i,r]=h.exports.useState(e),{register:u,handleSubmit:d}=b({resolver:x(bt)});h.exports.useEffect(()=>{r(e)},[e]);const f=()=>{n(!0)},c=v=>{n(!1),o(v.statusText)};return t("div",{children:s?t("div",{className:l.statusInput,children:t("form",{onSubmit:d(c),children:t("input",{...u("statusText"),autoFocus:!0,type:"text",defaultValue:i})})}):t("div",{className:l.statusText,children:t("span",{onDoubleClick:f,children:e||"This place for your status"})})})},It=({profile:e,status:o,updateUserStatus:s,isOwner:n,setPhoto:i})=>{var d,f;const r=h.exports.useId();if(!e)return t(C,{variant:"profile"});const u=c=>{c.target.files.length&&i(c.target.files[0])};return t(I,{children:a("div",{className:l.profileInfo,children:[a("div",{className:l.profileMain,children:[t("div",{className:l.profileLogo,children:t("label",{htmlFor:r,className:l.fileInputLabel,style:{cursor:n?"pointer":"auto"},children:t("img",{src:(d=e.photos)!=null&&d.large?(f=e.photos)==null?void 0:f.large:_,alt:"logo"})})}),t("div",{className:l.profileName,children:t("h6",{children:e.fullName})})]}),n&&t("input",{type:"file",onChange:u,id:r,className:l.fileInput}),n?t(xt,{status:o,updateUserStatus:s}):t("div",{className:l.statusText,children:t("span",{children:o||"No status"})}),t(Pt,{profile:e})]})})};function _t({params:e,isAuth:o,userId:s,getUserProfile:n,profile:i,getUserStatus:r,status:u,updateUserStatus:d,setPhoto:f}){const c=Number(e["*"]?e["*"]:s),v=s===c;return h.exports.useEffect(()=>{s&&(n(c),r(c))},[c,o]),t(It,{isOwner:v,profile:i,status:u,setPhoto:f,updateUserStatus:d})}const Tt=e=>({profile:e.profilePage.profile,userId:e.auth.userId,status:e.profilePage.status}),St={getUserProfile:A,getUserStatus:F,updateUserStatus:L,setPhoto:w};var Mt=$(g(Tt,St),lt,z)(_t);const $t=()=>a("main",{className:it.profile,children:[t(Mt,{}),t(at,{})]});export{$t as default};

import{b as s,c as u,a as x,d as v,u as N,j as c,o as _,m as T,n as $,h as b,t as I}from"./index.b98cbcf8.js";import{w as C}from"./withAuthRedirect.f074a181.js";const w="message_uwA",A="message-text_u7A",M="my-message_D8a",y="another-message_yYO";var g={message:w,messageText:A,myMessage:M,anotherMessage:y};const f=({children:e,fromMe:a})=>s("div",{className:`${g.message} ${a?g.myMessage:g.anotherMessage}`,children:s("p",{className:g.messageText,children:e})}),D="messages-wrapper_dT-",k="messages_lhi",H="messages-header_zUH",W="messages-logo_wlL",L="messages-name_4hi";var r={messagesWrapper:D,messages:k,messagesHeader:H,messagesLogo:W,messagesName:L};const P="wrapper_mN1",S="input_V-h",U="button_yIA";var d={wrapper:P,input:S,button:U};const j=u().shape({messageText:x().max(150)}),z=({onBtnClick:e,users:a})=>{const t=a==null?void 0:a.findIndex(l=>l.active===!0),{register:o,handleSubmit:n,reset:m}=N({resolver:_(j)});return c("form",{onSubmit:n(l=>{e(l.messageText,t),m()}),className:d.wrapper,children:[s("input",{...o("messageText"),type:"text",placeholder:"Your message...",className:d.input}),s("button",{type:"submit\r ",className:d.button,children:"Send"})]})},Y=e=>({users:e.messagesPage.users}),B={onBtnClick:T},F=v(Y,B)(z),G=({users:e})=>{var t,o;const a=e==null?void 0:e.findIndex(n=>n.active===!0);return c("div",{className:r.messagesWrapper,children:[c("div",{className:r.messagesHeader,children:[s("div",{className:r.messagesLogo,children:s("img",{src:`https://picsum.photos/200?random=${a}`,alt:""})}),s("div",{className:r.messagesName,children:(t=e[a])==null?void 0:t.name})]}),s("div",{className:r.messages,children:(o=e[a].messages)==null?void 0:o.map(({message:n,id:m,fromMe:i})=>s(f,{fromMe:i,children:n},m))}),s(F,{})]})},K="dialog_TXA",O="active_NI7",R="last-text-wrapper_2Zo";var p={dialog:K,active:O,lastTextWrapper:R};const V=({name:e,id:a,isActive:t,lastMessage:o,toggleUser:n})=>{const m=`/dialogs/${a}`,i=()=>{n(a)};return c("div",{className:`${p.dialog} ${t?p.active:""}`,onClick:i,children:[s("img",{src:`https://picsum.photos/200?random=${a}`,alt:""}),c($,{to:m,children:[s("h4",{children:e}),s("div",{className:p.lastTextWrapper,children:s("p",{children:o})})]})]})},X="dialogs_AzK",Z="dialogs-item_bGa";var h={dialogs:X,dialogsItem:Z};function q({users:e,toggleUser:a}){return c("div",{className:h.dialogs,children:[s("div",{className:h.dialogsItem,children:e==null?void 0:e.map(({id:t,name:o,active:n})=>s(V,{name:o,id:t,isActive:n,toggleUser:a,lastMessage:e[t].messages[e[t].messages.length-1].message},t+o))}),s(G,{users:e})]})}const E=e=>s(q,{...e}),J=e=>({users:e.messagesPage.users});var se=b(v(J,{toggleUser:I}),C)(E);export{se as default};
